<script>
    var userEmail = '';
    userEmail = localStorage.getItem('userEmail');
    var quizScore = '';
    quizScore = localStorage.getItem('quizScore');
    var quizlength = '';
    quizlength = localStorage.getItem('quizlength');

  // Variable to hold the quiz scores
  let quizScores = [];

  // Function to fetch quiz scores
  async function fetchQuizScores() {
    try {
      const response = await fetch('/api/quizScores');
      if (response.ok) {
        quizScores = await response.json();
      } else {
        console.error('Failed to fetch quiz scores');
      }
    } catch (error) {
      console.error('Error fetching quiz scores:', error);
    }
  }

  // Fetch quiz scores when the component is loaded
  fetchQuizScores();

</script>

<h1>User Page</h1>
<br>
<p>You have successfully logged in with email: {userEmail}</p>
<br>
<p>Your last quiz score: {quizScore}/{quizlength}</p>

<!-- fetch and display the score and times played -->

<!-- Display quiz scores -->
{#if quizScores.length > 0}
  <ul>
    {#each quizScores as score}
        Highest score: {score.correctAnswers}/10 correct answers
        <br><br>    
        Times played: {score.timesPlayed} times
    {/each}
  </ul>
{:else}
  <p>No scores available or data is being fetched...</p>
{/if}